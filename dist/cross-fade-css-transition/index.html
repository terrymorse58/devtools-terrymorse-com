<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cross Fade Effect with CSS Transitions</title>

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width, maximum-scale=1, minimum-scale=1, shrink-to-fit=no, user-scalable=no">

  <!-- for iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="elevation">

  <!-- bootstrap CSS only -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
    crossorigin="anonymous">

  <!-- support dark mode preference -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootsdark@latest/dist/bootsdark.min.css">

  <style>
    .wrapper {
      width: 90vw;
      height: 50vw;
      margin: 1rem 0 4rem 0;
      position: relative;
      background: #606060;
    }

    .wrapper.wrapper-fade {
      position: absolute;
      top: 0;
      left: 0;
      margin: 0;
      clip-path: inset(15vw 20vw 15vw 20vw);
      z-index: 2;
      opacity: 0;
      background: #606060;
    }

    .div-fade {
      width: calc(50vw);
      height: calc(20vw);
      position: absolute;
      top: 15vw;
      left: 20vw;
      font-family: "Courier New", monospace;
      font-weight: 700;
      color: green;
      font-size: 20vw;
      text-align: center;
      line-height: 100%;
      z-index: 1;
      opacity: 0;
    }

    .show {
      opacity: 1;
    }

    .div-fade.fade {
      z-index: 3;
      opacity: 1;
      transition: opacity 2s linear;
    }
    .wrapper-fade.fade {
      opacity: 1;
      transition: opacity 2s linear;
    }

    .btn-fade {
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 2;
    }
  </style>
</head>
<body style="padding: 1vw 5vw">

<h1>Cross Fade Effect with CSS Transitions</h1>

<div class="wrapper">
  <div id="div-clipped" class="wrapper wrapper-fade"></div>
  <div id="div-a" class="div-fade show">good</div>
  <div id="div-b" class="div-fade hide">goat</div>
  <button id="btn-fade" class="btn btn-primary btn-fade">Cross Fade</button>
</div>

<footer>
  <a class="text-primary" href="//terrymorse.com">Terry Morse Software</a>
</footer>

<script>
  const btnFade = document.querySelector('#btn-fade');
  const divClipped = document.querySelector('#div-clipped');

  btnFade.addEventListener('click', () => {
    const elToFade = document.querySelector('.div-fade.hide');
    console.log('elToFade:', elToFade);
    elToFade.classList.remove('hide');
    elToFade.classList.add('fade');
    divClipped.classList.add('fade');
  });

  divClipped.ontransitionend = () => {
    const showing = document.querySelector('.div-fade.show');
    const faded = document.querySelector('.div-fade.fade');
    divClipped.classList.remove('fade');
    showing.classList.remove('show');
    showing.classList.add('hide');
    faded.classList.add('show');
    faded.classList.remove('fade');
  }
</script>

</body>
</html>
